<views:D328Window
    x:Class="D328.WPF.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:views="clr-namespace:D328.WPF.Views"
    Title="{Binding Title}"
    Width="525"
    Height="350"
    prism:ViewModelLocator.AutoWireViewModel="True">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closed">
            <i:InvokeCommandAction Command="{Binding WindowCloseCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid
            Grid.Row="0"
            Grid.Column="0"
            Grid.ColumnSpan="2">

            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="5*" />
                </Grid.ColumnDefinitions>
                <TextBlock
                    Grid.Column="0"
                    HorizontalAlignment="Right"
                    Text="Input:" />
                <ComboBox
                    Grid.Column="1"
                    DisplayMemberPath="Name"
                    ItemsSource="{Binding InputAudioDevices}"
                    SelectedValue="{Binding SelectedInputAudioDevice}" />
            </Grid>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="5*" />
                </Grid.ColumnDefinitions>
                <TextBlock
                    Grid.Column="0"
                    HorizontalAlignment="Right"
                    Text="Output:" />
                <ComboBox
                    Grid.Column="1"
                    DisplayMemberPath="Name"
                    ItemsSource="{Binding OutputAudioDevices}"
                    SelectedValue="{Binding SelectedOutputAudioDevice}" />
            </Grid>
        </Grid>

        <ListBox
            Grid.Row="1"
            Grid.Column="0"
            DisplayMemberPath="AudioPath"
            ItemsSource="{Binding RecordList}"
            SelectedValue="{Binding SelectedRecord}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="{Binding RecordListSelectionChangedCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListBox>

        <Grid Grid.Row="1" Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="1*" />
                <ColumnDefinition Width="5*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Button
                Grid.Column="0"
                Command="{Binding RecordingStartCommand}"
                Content="{iconPacks:FontAwesome MicrophoneAltSolid}"
                IsEnabled="{Binding WindowMode, Converter={StaticResource WindowModeToRecordingButtonEnabledConverter}, Mode=OneWay}" />

            <Button
                Grid.Column="1"
                Command="{Binding RecordingStopCommand}"
                Content="{iconPacks:FontAwesome StopCircleRegular}"
                IsEnabled="{Binding WindowMode, Converter={StaticResource WindowModeToRecordingStopButtonEnabledConverter}, Mode=OneWay}" />

            <Button
                Grid.Column="2"
                Command="{Binding PlaybackStartCommand}"
                Content="{iconPacks:FontAwesome PlaySolid}" />

            <Button
                Grid.Column="3"
                Command="{Binding PlaybackPauseCommand}"
                Content="{iconPacks:FontAwesome PauseSolid}" />

            <Button
                Grid.Column="4"
                Command="{Binding PlaybackStopCommand}"
                Content="{iconPacks:FontAwesome StopSolid}" />

            <ProgressBar
                Grid.Column="5"
                Maximum="1"
                Value="{Binding Peak}" />
        </Grid>
    </Grid>
</views:D328Window>